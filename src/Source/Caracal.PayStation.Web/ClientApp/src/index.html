<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <title>Caracal Pay Station</title>
  <meta name="Description" content="Welcome to the Stencil App Starter. You can use this starter to build entire apps all with web components using Stencil!">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <meta name="theme-color" content="#16161d">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="x-ua-compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/themes/default.theme.css"/>
  <link rel="stylesheet" href="/assets/css/style.css"/>

  <script type="module" src="/lib/caracal_apex/components.js"></script>

  <script type="module" src="/build/app.esm.js"></script>
  <script nomodule src="/build/app.js"></script>
  <link href="/build/app.css" rel="stylesheet">

  <link rel="apple-touch-icon" href="/assets/icon/icon.png">
  <link rel="icon" type="image/x-icon" href="/assets/icon/favicon.ico">
  <link rel="manifest" href="/manifest.json">
</head>
<body>
  <dcx-loader></dcx-loader>

  <div id="theme">
    <h4>Theme</h4>
    <button data-theme='dark' id="dark-button">Dark</button>
    <button data-theme= 'default' id="light-button">Light</button>
  </div>

  <polaris-workflow id="main-wf" url="Infrastructure/settings?v=1.0.0.3" process="default"></polaris-workflow>

  <script>
    const style = document.querySelector('link:first-of-type');
    const darkThemeButton = document.querySelector("#dark-button");
    const lightThemeButton = document.querySelector("#light-button");

    lightThemeButton.addEventListener('click', setTheme);
    darkThemeButton.addEventListener('click', setTheme);

    function setTheme(e){
      const theme = e.target.dataset.theme||'default';
      localStorage.setItem('caracal-pay-station-theme', theme);
      style.href = `/assets/css/themes/${theme}.theme.css`;
    }

    const theme = localStorage.getItem('caracal-pay-station-theme');

    if(theme)
      style.href = `/assets/css/themes/${theme}.theme.css`;
  </script>
</body>
</html>
